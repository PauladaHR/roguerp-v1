-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONNECTION
-----------------------------------------------------------------------------------------------------------------------------------------
src = {}
Tunnel.bindInterface("vrp_taskbar",src)
-----------------------------------------------------------------------------------------------------------------------------------------
-- VARIABLES
-----------------------------------------------------------------------------------------------------------------------------------------
local Status = ""
local Progress = false
-----------------------------------------------------------------------------------------------------------------------------------------
-- TASKBAR:FAIL
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("failure",function()
	SetNuiFocus(false,false)
	Status = "failure"
	Progress = false
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- TASKBAR:SUCESS
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("success",function()
	SetNuiFocus(false,false)
	Status = "success"
	Progress = false
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- TASKBAR:TASKBAR
-----------------------------------------------------------------------------------------------------------------------------------------
function taskBar(Timer)
	if Progress then return end

	Progress = true
	SetNuiFocus(true,false)
	SendNUIMessage({ type = "open", time = Timer })

	while Progress do
		Citizen.Wait(0)
	end

	if Status == "success" then
		return true
	end

	return false
end

exports("skillTest", function(time, gapMin, gapMax)
	local rand = math.random(gapMin, gapMax)
	return taskBar(time, rand)
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- TASKTABLE
-----------------------------------------------------------------------------------------------------------------------------------------
function src.taskTable()
	if taskBar(2000) then
		return true
	end

	return false
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- TASKONE
-----------------------------------------------------------------------------------------------------------------------------------------
function src.taskOne()
	if taskBar(1500) then
		return true
	end

	return false
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- TASKTWO
-----------------------------------------------------------------------------------------------------------------------------------------
function src.taskTwo()
	if taskBar(2000) then
		if taskBar(1500) then
			return true
		end
	end

	return false
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- TASKTHREE
-----------------------------------------------------------------------------------------------------------------------------------------
function src.taskThree()
	if taskBar(2500) then
		if taskBar(2000) then
			if taskBar(1500) then
				return true
			end
		end
	end

	return false
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- TASKMECHANIC
-----------------------------------------------------------------------------------------------------------------------------------------
function src.taskMechanic()
	if taskBar(7500) then
		if taskBar(5000) then
			if taskBar(2500) then
				if taskBar(1000) then
					return true
				end
			end
		end
	end

	return false
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- TASKTYRE
-----------------------------------------------------------------------------------------------------------------------------------------
function src.taskTyre()
	if taskBar(7500) then
		if taskBar(5000) then
			return true
		end
	end

	return false
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- TASKFISHING
-----------------------------------------------------------------------------------------------------------------------------------------
function src.taskFishing()
	if taskBar(20000) then
		if taskBar(10000) then
			return true
		end
	end

	return false
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- TASKTHREE
-----------------------------------------------------------------------------------------------------------------------------------------
function src.taskLockpick()
	if taskBar(2500) then
		if taskBar(2000) then
			if taskBar(1500) then
				return true
			end
		end
	end

	return false
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- STEALTRUNK
-----------------------------------------------------------------------------------------------------------------------------------------
function src.stealTrunk()
	if taskBar(4500) then
		if taskBar(3500) then
			if taskBar(2500) then
				if taskBar(1500) then
					return true
				end
			end
		end
	end

	return false
end
-----------------------------------------------------------------------------------------------------------------------------------------
-- TASKTHREE
-----------------------------------------------------------------------------------------------------------------------------------------
exports("taskThree",function()
	if taskBar(2500) then
		if taskBar(2000) then
			if taskBar(1500) then
				return true
			end
		end
	end

	return false
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- TASKHOMES
-----------------------------------------------------------------------------------------------------------------------------------------
exports("taskHomes",function()
	if taskBar(4500) then
		if taskBar(3500) then
			if taskBar(2500) then
				return true
			end
		end
	end

	return false
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- TASKDOORS
-----------------------------------------------------------------------------------------------------------------------------------------
function src.taskDoors()
	if taskBar(1000) then
		return true
	end

	return false
end